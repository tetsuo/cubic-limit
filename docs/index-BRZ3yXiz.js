const t=t=>({_tag:"Hex",value:t}),e=(t,e,r,n)=>({_tag:"Hsla",h:t,s:e,l:r,a:n}),r=(t,r,n)=>e(t,r,n,1),n=r(0,0,0),s=r(360,1,1),i=t=>{switch(t._tag){case"Hex":return t.value;case"Hsla":{const{h:e,s:r,l:n,a:s}=t,i=t=>Math.round(100*t)/100,a=i(e),o=i(100*r)+"%",c=i(100*n)+"%",l=String(s);return 1===s?`hsl(${a}, ${o}, ${c})`:`hsla(${a}, ${o}, ${c}, ${l})`}}};var a=Object.freeze({__proto__:null,black:n,hex:t,hsl:r,hsla:e,toCss:i,white:s});const o=function(t,e){if("function"==typeof t)return function(){return t(arguments)?e.apply(this,arguments):t=>e(t,...arguments)};switch(t){case 0:case 1:throw new RangeError(`Invalid arity ${t}`);case 2:return function(t,r){return arguments.length>=2?e(t,r):function(r){return e(r,t)}};case 3:return function(t,r,n){return arguments.length>=3?e(t,r,n):function(n){return e(n,t,r)}};case 4:return function(t,r,n,s){return arguments.length>=4?e(t,r,n,s):function(s){return e(s,t,r,n)}};case 5:return function(t,r,n,s,i){return arguments.length>=5?e(t,r,n,s,i):function(i){return e(i,t,r,n,s)}};default:return function(){if(arguments.length>=t)return e.apply(this,arguments);const r=arguments;return function(t){return e(t,...r)}}}},c=t=>t,l=t=>()=>t;function u(t,e,r,n,s,i,a,o,c){switch(arguments.length){case 1:return t;case 2:return e(t);case 3:return r(e(t));case 4:return n(r(e(t)));case 5:return s(n(r(e(t))));case 6:return i(s(n(r(e(t)))));case 7:return a(i(s(n(r(e(t))))));case 8:return o(a(i(s(n(r(e(t)))))));case 9:return c(o(a(i(s(n(r(e(t))))))));default:{let t=arguments[0];for(let e=1;e<arguments.length;e++)t=arguments[e](t);return t}}}function f(t,e,r,n,s,i,a,o,c){switch(arguments.length){case 1:return t;case 2:return function(){return e(t.apply(this,arguments))};case 3:return function(){return r(e(t.apply(this,arguments)))};case 4:return function(){return n(r(e(t.apply(this,arguments))))};case 5:return function(){return s(n(r(e(t.apply(this,arguments)))))};case 6:return function(){return i(s(n(r(e(t.apply(this,arguments))))))};case 7:return function(){return a(i(s(n(r(e(t.apply(this,arguments)))))))};case 8:return function(){return o(a(i(s(n(r(e(t.apply(this,arguments))))))))};case 9:return function(){return c(o(a(i(s(n(r(e(t.apply(this,arguments)))))))))}}}const h=()=>"3.10.19",g=Symbol.for(`effect/GlobalValue/globalStoreId/${h()}`);g in globalThis||(globalThis[g]=new Map);const p=globalThis[g],d=(t,e)=>(p.has(t)||p.set(t,e()),p.get(t)),b=t=>"function"==typeof t,y=o(2,((t,e)=>{return((t=>"object"==typeof t&&null!==t)(r=t)||b(r))&&e in t;var r}));let _=class t{self;called=!1;constructor(t){this.self=t}next(t){return this.called?{value:t,done:!0}:(this.called=!0,{value:this.self,done:!1})}return(t){return{value:t,done:!0}}throw(t){throw t}[Symbol.iterator](){return new t(this.self)}};const m=Symbol.for("effect/Utils/YieldWrap");class S{#t;constructor(t){this.#t=t}[m](){return this.#t}}const v=d("effect/Utils/isStructuralRegion",(()=>({enabled:!1,tester:void 0}))),w=d(Symbol.for("effect/Hash/randomHashCache"),(()=>new WeakMap)),k=Symbol.for("effect/Hash"),O=t=>{if(!0===v.enabled)return 0;switch(typeof t){case"number":return C(t);case"bigint":return x(t.toString(10));case"boolean":case"symbol":return x(String(t));case"string":return x(t);case"undefined":return x("undefined");case"function":case"object":return null===t?x("null"):t instanceof Date?O(t.toISOString()):j(t)?t[k]():M(t);default:throw new Error(`BUG: unhandled typeof ${typeof t} - please report an issue at https://github.com/Effect-TS/effect/issues`)}},M=t=>(w.has(t)||w.set(t,C(Math.floor(Math.random()*Number.MAX_SAFE_INTEGER))),w.get(t)),I=t=>e=>53*e^t,E=t=>3221225471&t|t>>>1&1073741824,j=t=>y(t,k),C=t=>{if(t!=t||t===1/0)return 0;let e=0|t;for(e!==t&&(e^=4294967295*t);t>4294967295;)e^=t/=4294967295;return E(e)},x=t=>{let e=5381,r=t.length;for(;r;)e=33*e^t.charCodeAt(--r);return E(e)},A=t=>{let e=6151;for(let r=0;r<t.length;r++)e=u(e,I(O(t[r])));return E(e)},N=function(){if(1===arguments.length){const t=arguments[0];return function(e){return Object.defineProperty(t,k,{value:()=>e,enumerable:!1}),e}}const t=arguments[0],e=arguments[1];return Object.defineProperty(t,k,{value:()=>e,enumerable:!1}),e},J=Symbol.for("effect/Equal");function T(){return 1===arguments.length?t=>R(t,arguments[0]):R(arguments[0],arguments[1])}function R(t,e){if(t===e)return!0;const r=typeof t;if(r!==typeof e)return!1;if("object"===r||"function"===r){if(null!==t&&null!==e){if(P(t)&&P(e))return!(O(t)!==O(e)||!t[J](e))||!(!v.enabled||!v.tester)&&v.tester(t,e);if(t instanceof Date&&e instanceof Date)return t.toISOString()===e.toISOString()}if(v.enabled){if(Array.isArray(t)&&Array.isArray(e))return t.length===e.length&&t.every(((t,r)=>R(t,e[r])));if(Object.getPrototypeOf(t)===Object.prototype&&Object.getPrototypeOf(t)===Object.prototype){const r=Object.keys(t),n=Object.keys(e);if(r.length===n.length){for(const n of r)if(!(n in e)||!R(t[n],e[n]))return!!v.tester&&v.tester(t,e);return!0}}return!!v.tester&&v.tester(t,e)}}return!(!v.enabled||!v.tester)&&v.tester(t,e)}const P=t=>y(t,J),$=Symbol.for("nodejs.util.inspect.custom"),L=t=>y(t,"toJSON")&&b(t.toJSON)&&0===t.toJSON.length?t.toJSON():Array.isArray(t)?t.map(L):B(t),D=t=>JSON.stringify(t,null,2),Y=(t,e)=>{let r=[];const n=JSON.stringify(t,((t,e)=>"object"==typeof e&&null!==e?r.includes(e)?void 0:r.push(e)&&(void 0!==F.fiberRefs&&W(e)?e[H](F.fiberRefs):e):e),e);return r=void 0,n},H=Symbol.for("effect/Inspectable/Redactable"),W=t=>"object"==typeof t&&null!==t&&H in t,F=d("effect/Inspectable/redactableState",(()=>({fiberRefs:void 0}))),B=t=>W(t)&&void 0!==F.fiberRefs?t[H](F.fiberRefs):t,X=(t,e)=>{switch(e.length){case 0:return t;case 1:return e[0](t);case 2:return e[1](e[0](t));case 3:return e[2](e[1](e[0](t)));case 4:return e[3](e[2](e[1](e[0](t))));case 5:return e[4](e[3](e[2](e[1](e[0](t)))));case 6:return e[5](e[4](e[3](e[2](e[1](e[0](t))))));case 7:return e[6](e[5](e[4](e[3](e[2](e[1](e[0](t)))))));case 8:return e[7](e[6](e[5](e[4](e[3](e[2](e[1](e[0](t))))))));case 9:return e[8](e[7](e[6](e[5](e[4](e[3](e[2](e[1](e[0](t)))))))));default:{let r=t;for(let t=0,n=e.length;t<n;t++)r=e[t](r);return r}}},z=Symbol.for("effect/Effect"),G=Symbol.for("effect/Stream"),Z=Symbol.for("effect/Sink"),U=Symbol.for("effect/Channel"),q={_R:t=>t,_E:t=>t,_A:t=>t,_V:h()},V={[z]:q,[G]:q,[Z]:{_A:t=>t,_In:t=>t,_L:t=>t,_E:t=>t,_R:t=>t},[U]:{_Env:t=>t,_InErr:t=>t,_InElem:t=>t,_InDone:t=>t,_OutErr:t=>t,_OutElem:t=>t,_OutDone:t=>t},[J](t){return this===t},[k](){return N(this,M(this))},[Symbol.iterator](){return new _(new S(this))},pipe(){return X(this,arguments)}},K=Symbol.for("effect/Option"),Q={...V,[K]:{_A:t=>t},[$](){return this.toJSON()},toString(){return D(this.toJSON())}},tt=Object.assign(Object.create(Q),{_tag:"Some",_op:"Some",[J](t){return nt(t)&&it(t)&&T(this.value,t.value)},[k](){return N(this,I(O(this._tag))(O(this.value)))},toJSON(){return{_id:"Option",_tag:this._tag,value:L(this.value)}}}),et=O("None"),rt=Object.assign(Object.create(Q),{_tag:"None",_op:"None",[J]:t=>nt(t)&&st(t),[k]:()=>et,toJSON(){return{_id:"Option",_tag:this._tag}}}),nt=t=>y(t,K),st=t=>"None"===t._tag,it=t=>"Some"===t._tag,at=Object.create(rt),ot=Symbol.for("effect/Either"),ct={...V,[ot]:{_R:t=>t},[$](){return this.toJSON()},toString(){return D(this.toJSON())}},lt=Object.assign(Object.create(ct),{_tag:"Right",_op:"Right",[J](t){return ft(t)&&gt(t)&&T(this.right,t.right)},[k](){return I(O(this._tag))(O(this.right))},toJSON(){return{_id:"Either",_tag:this._tag,right:L(this.right)}}}),ut=Object.assign(Object.create(ct),{_tag:"Left",_op:"Left",[J](t){return ft(t)&&ht(t)&&T(this.left,t.left)},[k](){return I(O(this._tag))(O(this.left))},toJSON(){return{_id:"Either",_tag:this._tag,left:L(this.left)}}}),ft=t=>y(t,ot),ht=t=>"Left"===t._tag,gt=t=>"Right"===t._tag,pt=()=>at,dt=t=>{const e=Object.create(tt);return e.value=t,e},bt=st,yt=it,_t=t=>null==t?pt():dt(t),mt=o(2,((t,e)=>{if(yt(t))return t.value;throw e()})),St=t=>{const e=Object.create(lt);return e.right=t,e},vt=t=>{const e=Object.create(ut);return e.left=t,e},wt=ht,kt=(t,e)=>t<=e?((t,e)=>{const r=Math.max(1,Math.floor(t)),n=new Array(r);for(let t=0;t<r;t++)n[t]=e(t);return n})(e-t+1,(e=>t+e)):[t],Ot=t=>Array.isArray(t)?t:Array.from(t),Mt=o(2,((t,{onEmpty:e,onNonEmpty:r})=>jt(t)?r(xt(t),Nt(t)):e())),It=o(2,((t,e)=>[...t,e])),Et=t=>0===t.length,jt=t=>t.length>0,Ct=o(2,((t,e)=>{const r=Math.floor(e);if(((t,e)=>t<0||t>=e.length)(r,t))throw new Error(`Index ${r} out of bounds`);return t[r]})),xt=Ct(0),At=t=>t[t.length-1],Nt=t=>t.slice(1),Jt=o(3,((t,e,r)=>{const n=Ot(t),s=Ot(e);if(jt(n)&&jt(s)){const t=[r(xt(n),xt(s))],e=Math.min(n.length,s.length);for(let i=1;i<e;i++)t[i]=r(n[i],s[i]);return t}return[]})),Tt=o(2,((t,e)=>It((t=>t.slice(0,-1))(t),e(At(t))))),Rt=o(2,((t,e)=>Tt(t,(()=>e)))),Pt=()=>[],$t=o(2,((t,e)=>t.map(e))),Lt=o(2,((t,e)=>{if(Et(t))return[];const r=[];for(let n=0;n<t.length;n++){const s=e(t[n],n);for(let t=0;t<s.length;t++)r.push(s[t])}return r})),Dt=o(2,((t,e)=>{const r=Ot(t),n=[];for(let t=0;t<r.length;t++){const s=e(r[t],t);yt(s)&&n.push(s.value)}return n})),Yt=o(2,((t,e)=>{const r=[],n=[],s=Ot(t);for(let t=0;t<s.length;t++){const i=e(s[t],t);wt(i)?r.push(i.left):n.push(i.right)}return[r,n]})),Ht=o(3,((t,e,r)=>Ot(t).reduce(((t,e,n)=>r(t,e,n)),e))),Wt=(t,e)=>{const r=[];let n,s=t;for(;yt(n=e(s));){const[t,e]=n.value;r.push(t),s=e}return r};const Ft=t=>e=>{const r=Object.keys(e);return t.imap(t.productAll(r.map((t=>e[t]))),(t=>{const e={};for(let n=0;n<t.length;n++)e[r[n]]=t[n];return e}),(t=>r.map((e=>t[e]))))},Bt=(t,e=(e,r)=>{return(n=e,s=t,function(t){if(Array.isArray(t))return t.reduce(s,n);let e=n;for(const r of t)e=s(e,r);return e})(r);var n,s})=>({combine:t,combineMany:e}),Xt=()=>Bt((t=>t),(t=>t)),zt=t=>Bt(((e,r)=>{const n=Math.min(e.length,r.length),s=[];let i=0;for(const a of t){if(i>=n)break;s.push(a.combine(e[i],r[i])),i++}return s})),Gt=Ft({of:t=>Bt((()=>t),(()=>t)),imap:o(3,((t,e,r)=>Bt(((n,s)=>e(t.combine(r(n),r(s)))),((n,s)=>{return e(t.combineMany(r(n),(i=r,function(t){return Array.isArray(t)?t.map(i):function*(){for(const e of t)yield i(e)}()})(s)));var i})))),product:(t,e)=>Bt((([r,n],[s,i])=>[t.combine(r,s),e.combine(n,i)])),productMany:(t,e)=>{const r=zt(e);return Bt(((e,n)=>[t.combine(e[0],n[0]),...r.combine(e.slice(1),n.slice(1))]))},productAll:zt}),Zt=(t,e)=>({combine:t.combine,combineMany:t.combineMany,empty:e,combineAll:r=>t.combineMany(e,r)}),Ut=t=>{const e={};for(const r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r].empty);return Zt(Gt(t),e)},qt={partitionMap:Yt,filterMap:Dt},Vt={reduce:Ht},Kt=()=>Zt(Bt(((t,e)=>t.concat(e))),[]),Qt=t=>Zt(Bt(((e,r)=>bt(e)?r:bt(r)?e:dt(t.combine(e.value,r.value)))),pt()),te=(t,e,r,n)=>({_tag:"Translate",translateX:t,translateY:e,translateZ:r,drawing:n}),ee=(t,e,r,n)=>({_tag:"Rotate",rotateX:t,rotateY:e,rotateZ:r,drawing:n}),re=(t,e,r,n)=>({_tag:"Scale",scaleX:t,scaleY:e,scaleZ:r,drawing:n}),ne=t=>({_tag:"Many",drawings:t}),se=t=>({color:dt(t),lineWidth:pt(),lineCap:pt(),lineJoin:pt()}),ie=t=>({color:pt(),lineCap:dt(t),lineWidth:pt(),lineJoin:pt()}),ae=(t,e)=>({_tag:"Fill",shape:t,style:e}),oe=t=>({color:dt(t)}),ce=(t,e)=>({_tag:"Outline",shape:t,style:e}),le=Qt(Xt()),ue=Qt(Xt()),fe=Qt(Xt()),he=Qt(Xt()),ge=Ut({color:le}),pe=Ut({color:le,lineWidth:he,lineCap:ue,lineJoin:fe}),{combineAll:de,empty:be}=Kt(),ye=Zt(Bt(((t,e)=>"Many"===t._tag&&"Many"===e._tag?ne(de([t.drawings,e.drawings])):"Many"===t._tag?ne(de([t.drawings,[e]])):"Many"===e._tag?ne(de([[t],e.drawings])):ne([t,e]))),ne(be));var _e=Object.freeze({__proto__:null,clipped:(t,e)=>({_tag:"Clipped",shape:t,drawing:e}),fill:ae,fillStyle:oe,lineCap:ie,lineJoin:t=>({color:pt(),lineJoin:dt(t),lineWidth:pt(),lineCap:pt()}),lineWidth:t=>({color:pt(),lineWidth:dt(t),lineCap:pt(),lineJoin:pt()}),many:ne,monoidDrawing:ye,monoidFillStyle:ge,monoidOutlineStyle:pe,outline:ce,outlineColor:se,rotate:ee,scale:re,translate:te});const me=Zt(Bt(((t,e)=>t||e),((t,e)=>{if(!0===t)return!0;for(const t of e)if(!0===t)return!0;return!1})),!1),Se=Symbol.for("@effect/data/GlobalValue/globalStoreId");Se in globalThis||(globalThis[Se]=new Map);const ve=globalThis[Se],we=(t,e)=>(ve.has(t)||ve.set(t,e()),ve.get(t)),ke=function(t,e){if("function"==typeof t)return function(){return t(arguments)?e.apply(this,arguments):t=>e(t,...arguments)};switch(t){case 0:return e;case 1:return function(t){return arguments.length>=1?e(t):function(){return e(t)}};case 2:return function(t,r){return arguments.length>=2?e(t,r):function(r){return e(r,t)}};case 3:return function(t,r,n){return arguments.length>=3?e(t,r,n):function(n){return e(n,t,r)}};case 4:return function(t,r,n,s){return arguments.length>=4?e(t,r,n,s):function(s){return e(s,t,r,n)}};case 5:return function(t,r,n,s,i){return arguments.length>=5?e(t,r,n,s,i):function(i){return e(i,t,r,n,s)}};default:return function(){if(arguments.length>=t)return e.apply(this,arguments);const r=arguments;return function(t){return e(t,...r)}}}},Oe=t=>"function"==typeof t,Me=t=>null==t;class Ie{constructor(t,e,r,n){return Me(e)&&Me(t)?(e=4294967295*Math.random()>>>0,t=0):Me(e)&&(e=t,t=0),Me(n)&&Me(r)?(n=this._state?this._state[3]:4150755663,r=this._state?this._state[2]:335903614):Me(n)&&(n=r,r=0),this._state=new Int32Array([0,0,r>>>0,(1|(n||0))>>>0]),this._next(),Ee(this._state,this._state[0],this._state[1],t>>>0,e>>>0),this._next(),this}getState(){return[this._state[0],this._state[1],this._state[2],this._state[3]]}setState(t){this._state[0]=t[0],this._state[1]=t[1],this._state[2]=t[2],this._state[3]=1|t[3]}integer(t){if(!t)return this._next();if(!((t>>>=0)&t-1))return this._next()&t-1;let e=0;const r=(-t>>>0)%t>>>0;for(e=this._next();e<r;e=this._next());return e%t}number(){return(134217728*(1*(67108863&this._next()))+1*(134217727&this._next()))/9007199254740992}_next(){const t=this._state[0]>>>0,e=this._state[1]>>>0;!function(t,e,r,n,s){let i=(r>>>16)*(65535&s)>>>0,a=(65535&r)*(s>>>16)>>>0,o=(65535&r)*(65535&s)>>>0,c=(r>>>16)*(s>>>16)+((a>>>16)+(i>>>16))>>>0;a=a<<16>>>0,o=o+a>>>0,o>>>0<a>>>0&&(c=c+1>>>0);i=i<<16>>>0,o=o+i>>>0,o>>>0<i>>>0&&(c=c+1>>>0);c=c+Math.imul(r,n)>>>0,c=c+Math.imul(e,s)>>>0,t[0]=c,t[1]=o}(this._state,t,e,1481765933,1284865837),Ee(this._state,this._state[0],this._state[1],this._state[2],this._state[3]);let r=t>>>18,n=(e>>>18|t<<14)>>>0;r=(r^t)>>>0,n=(n^e)>>>0;const s=(n>>>27|r<<5)>>>0,i=t>>>27;return(s>>>i|s<<((-i>>>0&31)>>>0))>>>0}}function Ee(t,e,r,n,s){let i=e+n>>>0;const a=r+s>>>0;a>>>0<r>>>0&&(i=i+1|0),t[0]=i,t[1]=a}const je=we(Symbol.for("@effect/data/Hash/randomHashCache"),(()=>new WeakMap)),Ce=we(Symbol.for("@effect/data/Hash/pcgr"),(()=>new Ie)),xe=Symbol.for("@effect/data/Hash"),Ae=t=>{switch(typeof t){case"number":return Pe(t);case"bigint":return $e(t.toString(10));case"boolean":case"symbol":return $e(String(t));case"string":return $e(t);case"undefined":return $e("undefined");case"function":case"object":return null===t?$e("null"):Re(t)?t[xe]():Ne(t);default:throw new Error("Bug in Equal.hash")}},Ne=t=>(je.has(t)||je.set(t,Pe(Ce.integer(Number.MAX_SAFE_INTEGER))),je.get(t)),Je=t=>e=>53*e^t,Te=t=>3221225471&t|t>>>1&1073741824,Re=t=>"object"==typeof t&&null!==t&&xe in t,Pe=t=>{if(t!=t||t===1/0)return 0;let e=0|t;for(e!==t&&(e^=4294967295*t);t>4294967295;)e^=t/=4294967295;return Te(t)},$e=t=>{let e=5381,r=t.length;for(;r;)e=33*e^t.charCodeAt(--r);return Te(e)},Le=Symbol.for("@effect/data/Equal");function De(){return 1===arguments.length?t=>Ye(t,arguments[0]):Ye(arguments[0],arguments[1])}function Ye(t,e){if(t===e)return!0;const r=typeof t;return r===typeof e&&(!("object"!==r&&"function"!==r||null===t||null===e||!He(t)||!He(e))&&(Ae(t)===Ae(e)&&t[Le](e)))}const He=t=>"object"==typeof t&&null!==t&&Le in t,We=Symbol.for("nodejs.util.inspect.custom"),Fe=t=>"object"==typeof t&&null!==t&&"toJSON"in t&&"function"==typeof t.toJSON&&0===t.toJSON.length?t.toJSON():Array.isArray(t)?t.map(Fe):t,Be=Symbol.for("@effect/data/Chunk");const Xe=[],ze=(t=>(t=>(e,r)=>e===r||t(e,r))(((e,r)=>Ke(e).every(((e,n)=>t(e,Qe(r,n)))))))(De),Ge={[Be]:{_A:t=>t},toString(){return t=this.toJSON(),JSON.stringify(t,null,2);var t},toJSON(){return{_id:"Chunk",values:Ke(this).map(Fe)}},[We](){return this.toJSON()},[Le](t){return Ue(t)&&ze(this,t)},[xe](){return(t=>{let e=6151;for(let r=0;r<t.length;r++)e=Je(Ae(t[r]))(e);return Te(e)})(Ke(this))},[Symbol.iterator](){switch(this.backing._tag){case"IArray":return this.backing.array[Symbol.iterator]();case"IEmpty":return Xe[Symbol.iterator]();default:return Ke(this)[Symbol.iterator]()}},pipe(){return((t,e)=>{switch(e.length){case 1:return e[0](t);case 2:return e[1](e[0](t));case 3:return e[2](e[1](e[0](t)));case 4:return e[3](e[2](e[1](e[0](t))));case 5:return e[4](e[3](e[2](e[1](e[0](t)))));case 6:return e[5](e[4](e[3](e[2](e[1](e[0](t))))));case 7:return e[6](e[5](e[4](e[3](e[2](e[1](e[0](t)))))));case 8:return e[7](e[6](e[5](e[4](e[3](e[2](e[1](e[0](t))))))));case 9:return e[8](e[7](e[6](e[5](e[4](e[3](e[2](e[1](e[0](t)))))))));default:{let r=t;for(let t=0,n=e.length;t<n;t++)r=e[t](r);return r}}})(this,arguments)}},Ze=t=>{const e=Object.create(Ge);switch(e.backing=t,t._tag){case"IEmpty":e.length=0,e.depth=0,e.left=void 0,e.right=void 0;break;case"IConcat":e.length=t.left.length+t.right.length,e.depth=1+Math.max(t.left.depth,t.right.depth),e.left=t.left,e.right=t.right;break;case"IArray":e.length=t.array.length,e.depth=0,e.left=qe,e.right=qe;break;case"ISingleton":e.length=1,e.depth=0,e.left=qe,e.right=qe;break;case"ISlice":e.length=t.length,e.depth=t.chunk.depth+1,e.left=qe,e.right=qe}return e},Ue=t=>{return("object"==typeof(e=t)&&null!=e||Oe(e))&&Be in t;var e},qe=Ze({_tag:"IEmpty"}),Ve=(t,e,r)=>{switch(t.backing._tag){case"IArray":!function(t,e,r,n,s){for(let i=e;i<Math.min(t.length,e+s);i++)r[n+i-e]=t[i]}(t.backing.array,0,e,r,t.length);break;case"IConcat":Ve(t.left,e,r),Ve(t.right,e,r+t.left.length);break;case"ISingleton":e[r]=t.backing.a;break;case"ISlice":{let n=0,s=r;for(;n<t.length;)e[s]=Qe(t,n),n+=1,s+=1;break}}},Ke=t=>{switch(t.backing._tag){case"IEmpty":return Xe;case"IArray":return t.backing.array;default:{const e=new Array(t.length);return Ve(t,e,0),t.backing={_tag:"IArray",array:e},t.left=qe,t.right=qe,t.depth=0,e}}},Qe=ke(2,((t,e)=>{switch(t.backing._tag){case"IEmpty":throw new Error("Index out of bounds");case"ISingleton":if(0!==e)throw new Error("Index out of bounds");return t.backing.a;case"IArray":if(e>=t.length||e<0)throw new Error("Index out of bounds");return t.backing.array[e];case"IConcat":return e<t.left.length?Qe(t.left,e):Qe(t.right,e-t.left.length);case"ISlice":return Qe(t.backing.chunk,e+t.backing.offset)}})),tr=ke(2,((t,e)=>rr(t,(t=>Ze({_tag:"ISingleton",a:t}))(e)))),er=ke(2,((t,e)=>{if("IEmpty"===t.backing._tag)return e;if("IEmpty"===e.backing._tag)return t;const r=e.depth-t.depth;if(Math.abs(r)<=1)return Ze({_tag:"IConcat",left:t,right:e});if(r<-1){if(t.left.depth>=t.right.depth){const r=er(t.right,e);return Ze({_tag:"IConcat",left:t.left,right:r})}{const r=er(t.right.right,e);if(r.depth===t.depth-3){const e=Ze({_tag:"IConcat",left:t.right.left,right:r});return Ze({_tag:"IConcat",left:t.left,right:e})}{const e=Ze({_tag:"IConcat",left:t.left,right:t.right.left});return Ze({_tag:"IConcat",left:e,right:r})}}}if(e.right.depth>=e.left.depth){const r=er(t,e.left);return Ze({_tag:"IConcat",left:r,right:e.right})}{const r=er(t,e.left.left);if(r.depth===e.depth-3){const t=Ze({_tag:"IConcat",left:r,right:e.left.right});return Ze({_tag:"IConcat",left:t,right:e.right})}{const t=Ze({_tag:"IConcat",left:e.left.right,right:e.right});return Ze({_tag:"IConcat",left:r,right:t})}}})),rr=ke(2,((t,e)=>er(t,e))),nr=t=>({_tag:"Degrees",degrees:t}),sr=(t,e,r)=>[t,e,r],ir=t=>({_tag:"Composite",shapes:t}),ar=t=>e=>t.reduce(e,lr.empty,((t,e)=>({_tag:"Path",closed:!0,points:tr(t.points,e)}))),or=t=>e=>t.reduce(e,lr.empty,((t,e)=>({_tag:"Path",closed:!1,points:tr(t.points,e)}))),cr=t=>{switch(t._tag){case"Radians":return t.radians*(180/Math.PI);case"Degrees":return t.degrees}},lr=Ut({_tag:Zt(Bt(l("Path")),"Path"),closed:me,points:Zt(Bt(er),qe)});var ur=Object.freeze({__proto__:null,angle:cr,closed:ar,composite:ir,degrees:nr,monoidPath:lr,path:or,point:sr,radians:t=>({_tag:"Radians",radians:t})});const fr=Symbol.for("effect/Context/Tag"),hr=Symbol.for("effect/STM"),gr={...V,_op:"Tag",[hr]:q,[fr]:{_Service:t=>t,_Identifier:t=>t},toString(){return D(this.toJSON())},toJSON(){return{_id:"Tag",key:this.key,stack:this.stack}},[$](){return this.toJSON()},of:t=>t,context(t){return mr(this,t)}},pr=Symbol.for("effect/Context"),dr={[pr]:{_Services:t=>t},[J](t){if(yr(t)&&this.unsafeMap.size===t.unsafeMap.size){for(const e of this.unsafeMap.keys())if(!t.unsafeMap.has(e)||!T(this.unsafeMap.get(e),t.unsafeMap.get(e)))return!1;return!0}return!1},[k](){return N(this,C(this.unsafeMap.size))},pipe(){return X(this,arguments)},toString(){return D(this.toJSON())},toJSON(){return{_id:"Context",services:Array.from(this.unsafeMap).map(L)}},[$](){return this.toJSON()}},br=t=>{const e=Object.create(dr);return e.unsafeMap=t,e},yr=t=>y(t,pr),_r=br(new Map),mr=(t,e)=>br(new Map([[t.key,e]])),Sr=o(3,((t,e,r)=>{const n=new Map(t.unsafeMap);return n.set(e.key,r),br(n)})),vr=()=>_r,wr=Sr,kr=o(2,((t,e)=>{if(!t.unsafeMap.has(e.key))throw(t=>{const e=new Error("Service not found"+(t.key?`: ${String(t.key)}`:""));if(t.stack){const r=t.stack.split("\n");if(r.length>2){const t=r[2].match(/at (.*)/);t&&(e.message=e.message+` (defined at ${t[1]})`)}}if(e.stack){const t=e.stack.split("\n");t.splice(1,3),e.stack=t.join("\n")}return e})(e);return t.unsafeMap.get(e.key)})),Or=t=>()=>{const e=Error.stackTraceLimit;Error.stackTraceLimit=2;const r=new Error;function n(){}return Error.stackTraceLimit=e,Object.setPrototypeOf(n,gr),n.key=t,Object.defineProperty(n,"stack",{get:()=>r.stack}),n},Mr=V;class Ir{self;called=!1;constructor(t){this.self=t}next(t){return this.called?{value:t,done:!0}:(this.called=!0,{value:this.self,done:!1})}return(t){return{value:t,done:!0}}throw(t){throw t}[Symbol.iterator](){return new Ir(this.self)}}const Er=Symbol.for("effect/Micro"),jr=Symbol.for("effect/Micro/runSymbol"),Cr=t=>"object"==typeof t&&null!==t&&Er in t,xr={...Mr,_op:"Micro",[Er]:{_A:c,_E:c,_R:c},[Symbol.iterator](){return new Ir(new S(this))}},Ar=function(){function t(){}return t.prototype=xr,t}();class Nr extends Ar{[jr](t,e){this.asMicro()[jr](t,e)}}const Jr=Symbol.for("effect/Micro/MicroCause"),Tr={_E:c};class Rr extends globalThis.Error{_tag;traces;[Jr];constructor(t,e,r){const n=`MicroCause.${t}`;let s,i,a;if(e instanceof globalThis.Error){s=`(${n}) ${e.name}`,i=e.message;const t=i.split("\n").length;a=e.stack?`(${n}) ${e.stack.split("\n").slice(0,t+3).join("\n")}`:`${s}: ${i}`}else s=n,i=((t,e=2)=>{if("string"==typeof t)return t;try{return"object"==typeof t?Y(t,e):String(t)}catch(e){return String(t)}})(e,0),a=`${s}: ${i}`;r.length>0&&(a+=`\n    ${r.join("\n    ")}`),super(i),this._tag=t,this.traces=r,this[Jr]=Tr,this.name=s,this.stack=a}pipe(){return X(this,arguments)}toString(){return this.stack}[$](){return this.stack}}class Pr extends Rr{defect;constructor(t,e=[]){super("Die",t,e),this.defect=t}}class $r extends Rr{constructor(t=[]){super("Interrupt","interrupted",t)}}const Lr=vt(((t=[])=>new $r(t))()),Dr=St,Yr=t=>vt(((t,e=[])=>new Pr(t,e))(t)),Hr=Symbol.for("effect/Micro/Env"),Wr={[Hr]:{_R:c},pipe(){return X(this,arguments)}},Fr=t=>{const e=Object.create(Wr);return e.refs=t,e},Br=o(2,((t,e)=>e.key in t.refs?t.refs[e.key]:e.initial)),Xr=o(3,((t,e,r)=>{const n=Object.assign(Object.create(null),t.refs);return n[e.key]=r,Fr(n)})),zr=o(2,((t,e)=>Fr(e(Object.assign(Object.create(null),t.refs))))),Gr=o(3,((t,e,r)=>ln((function(n,s){const i=Br(n,en),a=Xr(n,en,wr(i,e,r));t[jr](a,s)})))),Zr="setImmediate"in globalThis?globalThis.setImmediate:t=>setTimeout(t,0);class Ur{tasks=[];running=!1;scheduleTask(t,e){this.tasks.push(t),this.running||(this.running=!0,Zr(this.afterScheduled))}afterScheduled=()=>{this.running=!1,this.runTasks()};runTasks(){const t=this.tasks;this.tasks=[];for(let e=0,r=t.length;e<r;e++)t[e]()}shouldYield(t){return!1}flush(){for(;this.tasks.length>0;)this.runTasks()}}const qr=Symbol.for("effect/Micro/EnvRef"),Vr={...xr,[qr]:qr,[jr](t,e){var r;(r=this,ln(((t,e)=>e(St(Br(t,r))))))[jr](t,e)}},Kr=(t,e)=>d(t,(()=>{const r=Object.create(Vr);return r.key=t,r.initial=e(),r})),Qr=Kr("effect/Micro/currentAbortController",(()=>{})),tn=Kr("effect/Micro/currentAbortSignal",(()=>{})),en=Kr("effect/Micro/currentContext",(()=>vr())),rn=Kr("effect/Micro/currentConcurrency",(()=>"unbounded")),nn=Kr("effect/Micro/currentMaxDepthBeforeYield",(()=>2048)),sn=Kr("effect/Micro/currentInterruptible",(()=>!0)),an=Kr("effect/Micro/currentScheduler",(()=>new Ur)),on=d("effect/Micro/microDepthState",(()=>({depth:0,maxDepthBeforeYield:nn.initial}))),cn=(t,e)=>(t=>{const e=Object.create(xr);return e[jr]=t,e})((function r(n,s){if(e&&!1!==n.refs[sn.key]&&n.refs[tn.key].aborted)return s(Lr);on.depth++,1===on.depth&&(on.maxDepthBeforeYield=Br(n,nn));const i=n.refs[an.key];if(on.depth>=on.maxDepthBeforeYield||i.shouldYield(n))i.scheduleTask((()=>r(n,s)),0);else try{t(n,s)}catch(t){s(Yr(t))}on.depth--})),ln=t=>cn(t,!0),un=t=>ln((function(e,r){r(t)})),fn=t=>un(Dr(t)),hn=t=>ln((function(e,r){r(Dr(t()))})),gn=t=>ln((function(e,r){t()[jr](e,r)})),pn=o(2,((t,e)=>ln((function(r,n){t[jr](r,(function(t){if("Left"===t._tag)return n(t);e(t.right)[jr](r,n)}))})))),dn=o(2,((t,e)=>ln((function(r,n){t[jr](r,(function(t){if("Left"===t._tag)return n(t);if(Br(r,tn).aborted)return n(Lr);const s=Cr(e)?e:"function"==typeof e?e(t.right):e;Cr(s)?s[jr](r,n):n(Dr(s))}))}))));const bn=t=>cn((function(e,r){const n=zr(e,(function(t){return t[sn.key]=!1,t[tn.key]=(new AbortController).signal,t}));t[jr](n,r)}),!1),yn=(t,e,r)=>ln((function(n,s){const i="inherit"===r?.concurrency?Br(n,rn):r?.concurrency??1,a="unbounded"===i?Number.POSITIVE_INFINITY:Math.max(1,i),[o,c]=function(t){const e=new AbortController,r=Br(t,tn);function n(){e.abort(),r.removeEventListener("abort",n)}return r.addEventListener("abort",n),[zr(t,(function(t){return t[Qr.key]=e,t[tn.key]=e.signal,t})),n]}(n);let l;const u=Array.from(t);let f=u.length;if(0===f)return s(St(r?.discard?void 0:[]));const h=r?.discard?void 0:new Array(f);let g=0,p=0,d=0,b=!1;!function t(){for(b=!0;p<a&&g<f;){const r=g,n=u[r];g++,p++;try{e(n,r)[jr](o,(function(e){"Left"===e._tag?void 0===l&&(l=e,f=g,c()):void 0!==h&&(h[r]=e.right),d++,p--,d===f?s(l??St(h)):!b&&p<a&&t()}))}catch(t){l=Yr(t),f=g,c()}}b=!1}()})),_n=Symbol.for("effect/Micro/Handle");class mn extends Nr{parentSignal;[_n];observers=new Set;_exit=void 0;_controller;isRoot;constructor(t,e){super(),this.parentSignal=t,this[_n]=_n,this.isRoot=void 0!==e,this._controller=e??new AbortController,this.isRoot||t.addEventListener("abort",this.unsafeInterrupt)}unsafePoll(){return this._exit??null}unsafeInterrupt=()=>{this._controller.abort()};emit(t){this._exit||(this._exit=t,this.isRoot||this.parentSignal.removeEventListener("abort",this.unsafeInterrupt),this.observers.forEach((e=>e(t))),this.observers.clear())}addObserver(t){if(this._exit)return t(this._exit);this.observers.add(t)}removeObserver(t){this.observers.delete(t)}get await(){return gn((()=>{return this._exit?fn(this._exit):(t=t=>{function e(e){t(fn(e))}return this.addObserver(e),hn((()=>{this.removeObserver(e)}))},ln((function(e,r){let n=!1;const s=t.length>1?new AbortController:void 0,i=Br(e,tn);let a;function o(){c(a?bn(dn(a,un(Lr))):un(Lr)),void 0!==s&&s.abort()}function c(t){n||(n=!0,i.removeEventListener("abort",o),t[jr](e,r))}a=void 0===s?t(c):t(c,s.signal),n||i.addEventListener("abort",o)})));var t}))}get join(){return pn(this.await,un)}get interrupt(){return gn((()=>(this.unsafeInterrupt(),this.await)))}asMicro(){return this.join}}const Sn=t=>{const e=new Ur,r=((t,e)=>{const r=new AbortController,n=Object.create(null);n[Qr.key]=r,n[tn.key]=r.signal,n[an.key]=e?.scheduler??new Ur;const s=Fr(n),i=new mn(r.signal,r);return t[jr](Xr(s,tn,i._controller.signal),(t=>{i.emit(t),e?.signal&&e.signal.removeEventListener("abort",i.unsafeInterrupt)})),e?.signal&&(e.signal.aborted?i.unsafeInterrupt():e.signal.addEventListener("abort",i.unsafeInterrupt,{once:!0})),i})(t,{scheduler:e});e.flush();const n=r.unsafePoll();return null===n?Yr(r):n},vn=t=>{const e=Sn(t);if("Left"===e._tag)throw e.left;return e.right},wn=o(2,((t,e)=>t+e)),kn=o(2,((t,e)=>t*e)),On=t=>e=>u(Jt(e,t,kn),Ht(0,wn)),Mn=t=>Math.sin(t*Math.PI/180),In=t=>Math.cos(t*Math.PI/180),En=t=>[[1,0,0,0],[0,In(t),Mn(t),0],[0,-Mn(t),In(t),0],[0,0,0,1]],jn=t=>[[In(t),0,-Mn(t),0],[0,1,0,0],[Mn(t),0,In(t),0],[0,0,0,1]],Cn=t=>[[In(t),Mn(t),0,0],[-Mn(t),In(t),0,0],[0,0,1,0],[0,0,0,1]],xn=[[1,0,0,0],[0,1,0,0],[0,0,1,0],[0,0,0,1]],An=Bt(((t,e)=>{return u($t(u(xt(r=e),$t(((t,e)=>Nn(e)(r)))),On),(e=>$t(t,(t=>$t(e,(e=>e(t)))))));var r}));Zt(An,xn);const Nn=t=>$t(Ct(t)),Jn=t=>isFinite(t[0])&&isFinite(t[1])&&isFinite(t[2]),Tn=t=>{switch(t._tag){case"Composite":return t.shapes.flatMap(Tn);case"Path":return u(Ke(t.points),Mt({onEmpty:Pt,onNonEmpty:(e,r)=>u(r,$t(Pn),Ht(Rn(e)([]),((t,e)=>e(t))),(e=>t.closed?$n(e).slice(0,-1):e))}))}},Rn=t=>e=>Jn(t)?It(e,[t]):e,Pn=t=>e=>Jn(t)?jt(e)?u(e,Tt(It(t))):Rn(t)(e):e,$n=t=>{if(!jt(t))return t;const e=At(t);if(!(jt(e)&&e.length>1))return t;const r=At(e),n=e[0];return r[0]===n[0]&&r[1]===n[1]&&r[2]===n[2]?t:It(Rt(It(e,n))(t),[n])};class Ln extends(Or("Render")()){}const Dn=fn(void 0),Yn=t=>jt(t)?dt(t):pt(),Hn=qt.filterMap(c);const Wn=(t,e)=>{return u(Tn(t),$t(Yn),Hn,$t($t(It(1))),$t((r=e,t=>An.combine(t,r))));var r},Fn=t=>{return(e=Ln,ln((function(t,r){r(Dr(kr(Br(t,en),e)))}))).pipe(dn((e=>{const r=t=>u(e.save(),dn((()=>t)),dn(e.restore)),n=(t,e)=>yt(t)?e(t.value):Dn,s=Mt({onEmpty:()=>Dn,onNonEmpty:(t,r)=>u(e.moveTo(t),dn((()=>yn(r,e.lineTo,{discard:!0}))))}),a=(t,e)=>yn(Wn(t,e),s,{discard:!0}),o=(t,s)=>{switch(t._tag){case"Many":return yn(t.drawings,(t=>o(t,s)),{discard:!0});case"Scale":return o(t.drawing,An.combine(s,[[(c=[t.scaleX,t.scaleY,t.scaleZ])[0],0,0,0],[0,c[1],0,0],[0,0,c[2],0],[0,0,0,1]]));case"Rotate":return o(t.drawing,An.combineMany(s,[Cn(cr(t.rotateZ)),jn(cr(t.rotateY)),En(cr(t.rotateX))]));case"Translate":return o(t.drawing,An.combine(s,(t=>[[1,0,0,0],[0,1,0,0],[0,0,1,0],[t[0],t[1],t[2],1]])([t.translateX,t.translateY,t.translateZ])));case"Outline":return r(u(n(t.style.color,f(i,e.setStrokeStyle)),dn((()=>n(t.style.lineWidth,e.setLineWidth))),dn((()=>n(t.style.lineCap,e.setLineCap))),dn((()=>n(t.style.lineJoin,e.setLineJoin))),dn(e.beginPath),dn((()=>a(t.shape,s))),dn(e.stroke)));case"Fill":return r(u(n(t.style.color,f(i,e.setFillStyle)),dn(e.beginPath),dn((()=>a(t.shape,s))),dn((()=>e.fill()))));case"Clipped":return r(u(e.beginPath(),dn((()=>a(t.shape,s))),dn((()=>e.clip())),dn((()=>o(t.drawing,s)))))}var c};return o(t,xn)})));var e},Bn=t=>hn((()=>_t((t=>document.getElementById(t))(t)))),Xn=f((t=>t.getContext("2d")),_t,l,hn),zn=fn(window.devicePixelRatio),Gn=(t,e)=>u(Bn(e),dn(mt((()=>new Error(`Unable to find canvas with id ${e}`)))),dn((e=>{const r=e.getBoundingClientRect();return zn.pipe(dn((n=>(e.width=r.width*n,e.height=r.height*n,e.style.width=`${r.width}px`,e.style.height=`${r.height}px`,u(Xn(e),dn(mt((()=>new Error("Unable to get context 2D")))),dn((r=>(r.scale(n,n),((t,e)=>Gr(Fn(t),Ln,{fill:t=>(void 0!==t?e.fill(t):e.fill(),Dn),clip:t=>(void 0!==t?e.clip(t):e.clip(),Dn),setFillStyle:t=>(e.fillStyle=t,Dn),setStrokeStyle:t=>(e.strokeStyle=t,Dn),setLineWidth:t=>(e.lineWidth=t,Dn),setLineJoin:t=>(e.lineJoin=t,Dn),setLineCap:t=>(e.lineCap=t,Dn),stroke:()=>(e.stroke(),Dn),save:()=>(e.save(),Dn),restore:()=>(e.restore(),Dn),lineTo:t=>(e.lineTo(t[0],t[1]),Dn),moveTo:t=>(e.moveTo(t[0],t[1]),Dn),beginPath:()=>(e.beginPath(),Dn),closePath:()=>(e.closePath(),Dn)}))(t({height:e.height/n,width:e.width/n}),r)))))))))}))).pipe(vn);export{dt as A,pt as B,ir as C,Lt as D,sr as E,Vt as F,a as G,_e as H,ur as S,A as a,J as b,N as c,ne as d,T as e,$t as f,ce as g,kt as h,ee as i,re as j,f as k,ie as l,pe as m,nr as n,se as o,u as p,ae as q,Gn as r,k as s,oe as t,Wt as u,t as v,s as w,or as x,ar as y,te as z};
